---
import Base from './Base.astro';

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<Base title={title} description={description}>
  <article class="legacy-content">
    <slot />
  </article>

  <style>
    .legacy-content {
      background-color: var(--color-bg-card);
      padding: 2rem;
      border-radius: 8px;
      border: 1px solid var(--color-border);
      box-shadow: 0 2px 8px var(--color-shadow);
    }

    @media (max-width: 600px) {
      .legacy-content {
        padding: 1rem;
        border-radius: 0;
        border-left: none;
        border-right: none;
        margin: 0 -1rem;
      }
    }

    /* Typography improvements */
    .legacy-content :global(h1),
    .legacy-content :global(h2),
    .legacy-content :global(h3),
    .legacy-content :global(h4) {
      font-family: var(--font-heading);
      color: var(--color-text);
      text-align: center;
      margin-bottom: 1rem;
      letter-spacing: 0.02em;
    }

    .legacy-content :global(h1) {
      font-size: 1.75rem;
      font-weight: 600;
      color: var(--color-accent);
      margin-top: 1rem;
    }

    .legacy-content :global(h2) {
      font-size: 1.5rem;
      font-weight: 500;
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 0.5rem;
    }

    .legacy-content :global(h3) {
      font-size: 1.25rem;
      font-weight: 500;
      color: var(--color-burgundy);
      margin-top: 2rem;
    }

    /* Bilingual table styling */
    .legacy-content :global(table) {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      table-layout: fixed;
    }

    .legacy-content :global(table tr) {
      border-bottom: 1px solid var(--color-border-light);
    }

    .legacy-content :global(table tr:last-child) {
      border-bottom: none;
    }

    /* Two-column layout: Latin left, English right */
    .legacy-content :global(td) {
      vertical-align: top;
      padding: 1rem 1.25rem;
      width: 50%;
      line-height: 1.8;
    }

    /* Latin column (left) */
    .legacy-content :global(td:first-child) {
      color: var(--color-text-muted);
      border-right: 2px solid var(--color-border);
      padding-right: 1.5rem;
    }

    /* English column (right) */
    .legacy-content :global(td:last-child) {
      padding-left: 1.5rem;
    }


    /* Bold text styling (often used for objections, replies) */
    .legacy-content :global(b),
    .legacy-content :global(strong) {
      font-weight: 600;
      color: var(--color-text);
    }

    .legacy-content :global(i b),
    .legacy-content :global(b i) {
      font-family: var(--font-heading);
      font-size: 0.95rem;
      color: var(--color-burgundy);
    }

    /* Links */
    .legacy-content :global(a) {
      color: var(--color-accent);
      text-decoration: none;
      transition: color var(--transition-fast);
    }

    .legacy-content :global(a:hover) {
      color: var(--color-accent-hover);
      text-decoration: underline;
    }

    /* Navigation blocks (the right-aligned navigation) */
    .legacy-content :global(p[align="right"]),
    .legacy-content :global(p[align="Right"]) {
      font-family: var(--font-sans);
      font-size: 0.8rem;
      background: var(--color-bg-alt);
      padding: 0.75rem 1rem;
      border-radius: 6px;
      margin: 1.5rem 0;
      text-align: right !important;
      border: 1px solid var(--color-border-light);
    }

    .legacy-content :global(p[align="right"] a),
    .legacy-content :global(p[align="Right"] a) {
      color: var(--color-navy);
      padding: 0.15rem 0.35rem;
      border-radius: 3px;
      transition: all var(--transition-fast);
    }

    .legacy-content :global(p[align="right"] a:hover),
    .legacy-content :global(p[align="Right"] a:hover) {
      background: var(--color-highlight);
      text-decoration: none;
    }

    /* Horizontal rules */
    .legacy-content :global(hr) {
      border: none;
      height: 1px;
      background: linear-gradient(to right, transparent, var(--color-border), transparent);
      margin: 2rem 0;
    }

    /* Center blocks - used for headings and layout, not emphasis */
    .legacy-content :global(center) {
      margin: 1rem 0;
    }

    /* Blockquotes - legacy HTML uses these as layout containers, not actual quotes */
    .legacy-content :global(blockquote) {
      margin: 1rem 0;
      padding-left: 0;
      border-left: none;
      font-style: normal;
    }

    /* Definition lists (used in some works) */
    .legacy-content :global(dl) {
      margin: 1rem 0;
    }

    .legacy-content :global(dt) {
      font-weight: 600;
      color: var(--color-accent);
      margin-top: 1rem;
    }

    .legacy-content :global(dd) {
      margin-left: 1.5rem;
      margin-bottom: 0.5rem;
      line-height: 1.7;
    }

    /* Preformatted text */
    .legacy-content :global(pre) {
      font-family: var(--font-body);
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    /* Font size overrides (old HTML used FONT tags) */
    .legacy-content :global(font[size="-1"]) {
      font-size: 0.85rem;
    }

    .legacy-content :global(font[size="-2"]) {
      font-size: 0.75rem;
    }

    .legacy-content :global(font) {
      color: inherit !important;
    }

    /* Small text */
    .legacy-content :global(small) {
      font-size: 0.875rem;
      color: var(--color-text-muted);
    }

    /* Responsive: Stack columns on mobile */
    @media (max-width: 768px) {
      .legacy-content :global(table) {
        display: block;
      }

      .legacy-content :global(tbody) {
        display: block;
      }

      .legacy-content :global(tr) {
        display: block;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--color-border);
      }

      .legacy-content :global(tr:last-child) {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }

      .legacy-content :global(td) {
        display: block;
        width: 100% !important;
        padding: 0.75rem 0;
        border-right: none !important;
      }

      .legacy-content :global(td:first-child) {
        padding-right: 0;
        padding-bottom: 1rem;
        margin-bottom: 1rem;
        border-bottom: 1px dashed var(--color-border-light);
      }

      .legacy-content :global(td:last-child) {
        padding-left: 0;
      }

      /* Smaller nav blocks on mobile */
      .legacy-content :global(p[align="right"]),
      .legacy-content :global(p[align="Right"]) {
        font-size: 0.7rem;
        padding: 0.5rem 0.75rem;
      }
    }

    /* Dark mode adjustments */
    [data-theme="dark"] .legacy-content {
      background-color: var(--color-bg-card);
    }

    [data-theme="dark"] .legacy-content :global(td:first-child) {
      color: var(--color-text-muted);
      border-right-color: var(--color-border);
    }

    [data-theme="dark"] .legacy-content :global(p[align="right"]),
    [data-theme="dark"] .legacy-content :global(p[align="Right"]) {
      background: var(--color-bg-alt);
      border-color: var(--color-border);
    }

    [data-theme="dark"] .legacy-content :global(font) {
      color: inherit !important;
    }

    /* Print styles */
    @media print {
      .legacy-content {
        padding: 0;
        border: none;
        box-shadow: none;
      }

      .legacy-content :global(p[align="right"]),
      .legacy-content :global(p[align="Right"]) {
        display: none;
      }

      .legacy-content :global(td:first-child) {
        border-right: 1px solid #ccc;
      }
    }
  </style>
</Base>
